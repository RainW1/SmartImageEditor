<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic Tac Toe</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Arial', sans-serif; }
        body { background: #1a1a1a; color: #fff; min-height: 100vh; padding: 20px; }
        .header { text-align: center; margin-bottom: 30px; }
        .header h1 { font-size: 2.5rem; margin-bottom: 10px; color: #2196F3; }
        .header p { color: #ccc; font-size: 1.1rem; }
        .game-container { max-width: 350px; margin: 0 auto; background: #222; border-radius: 12px; padding: 20px; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
        .control-buttons { text-align: center; margin: 10px 0; }
        .control-btn { padding: 8px 16px; margin: 0 5px; background: #2196F3; color: white; border-radius: 4px; border: none; cursor: pointer; }
        .control-btn:hover { opacity: 0.9; transform: translateY(-2px); }
        .status { margin: 15px 0; font-size: 1.2rem; text-align: center; color: #2196F3; }
    </style>
</head>
<body>
    <div class="header">
        <h1>Tic Tac Toe</h1>
        <p>Play 2 Player or against AI</p>
    </div>

    <div class="game-container">
        <div class="control-buttons">
            <button class="control-btn" onclick="initTicTacToe()">Start / Reset</button>
        </div>
        <div class="mode-selection" style="text-align: center; margin-bottom: 10px;">
            <button class="active" data-mode="pvp" style="padding: 8px 16px; margin: 0 5px; background: #2196F3; color: white; border: none; border-radius: 4px; cursor: pointer;">2 Player</button>
            <button data-mode="pve" style="padding: 8px 16px; margin: 0 5px; background: #2196F3; color: white; border: none; border-radius: 4px; cursor: pointer;">VS AI</button>
        </div>
        <div id="ticTacToe-board" style="display: grid; grid-template-columns: repeat(3, 100px); gap: 5px; background: #333; padding: 5px; border-radius: 4px; margin: 20px auto;"></div>
        <div class="status" id="ticTacToe-status">X's turn - Click to place</div>
    </div>

    <script>
        let ticTacToeBoard = Array(9).fill(null);
        let ticTacToeCurrentPlayer = "X";
        let ticTacToeGameMode = "pvp";
        let ticTacToeGameOver = false;

        function initTicTacToe() {
            ticTacToeBoard = Array(9).fill(null);
            ticTacToeCurrentPlayer = "X";
            ticTacToeGameOver = false;
            renderTicTacToeBoard();
            document.getElementById('ticTacToe-status').textContent = "X's turn - Click to place";
        }

        // Mode Selection
        document.querySelectorAll('.mode-selection button').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.mode-selection button').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                ticTacToeGameMode = btn.dataset.mode;
                initTicTacToe();
            });
        });

        function renderTicTacToeBoard() {
            const container = document.getElementById('ticTacToe-board');
            container.innerHTML = "";
            for (let i = 0; i < 9; i++) {
                const cell = document.createElement("div");
                cell.style.width = "100px";
                cell.style.height = "100px";
                cell.style.background = "#fff";
                cell.style.cursor = ticTacToeGameOver ? "default" : "pointer";
                cell.style.display = "flex";
                cell.style.alignItems = "center";
                cell.style.justifyContent = "center";
                cell.style.fontSize = "48px";
                cell.style.fontWeight = "bold";
                cell.style.color = "#333";
                cell.dataset.index = i;
                cell.textContent = ticTacToeBoard[i] || "";
                cell.addEventListener("click", () => handleTicTacToeCellClick(i));
                container.appendChild(cell);
            }
        }

        function handleTicTacToeCellClick(index) {
            if (ticTacToeGameOver || ticTacToeBoard[index] !== null) return;
            ticTacToeBoard[index] = ticTacToeCurrentPlayer;
            renderTicTacToeBoard();
            
            if (checkTicTacToeWin(ticTacToeCurrentPlayer)) {
                document.getElementById('ticTacToe-status').textContent = `${ticTacToeCurrentPlayer} Wins! üéâ`;
                ticTacToeGameOver = true;
                return;
            }
            
            if (checkTicTacToeDraw()) {
                document.getElementById('ticTacToe-status').textContent = "ü§ù It's a Draw!";
                ticTacToeGameOver = true;
                return;
            }
            
            ticTacToeCurrentPlayer = ticTacToeCurrentPlayer === "X" ? "O" : "X";
            document.getElementById('ticTacToe-status').textContent = `${ticTacToeCurrentPlayer}'s turn`;
            
            // AI move for PvE mode
            if (ticTacToeGameMode === "pve" && ticTacToeCurrentPlayer === "O" && !ticTacToeGameOver) {
                setTimeout(ticTacToeAIMove, 500);
            }
        }

        function ticTacToeAIMove() {
            // Win if possible
            for (let i = 0; i < 9; i++) {
                if (ticTacToeBoard[i] === null) {
                    ticTacToeBoard[i] = "O";
                    if (checkTicTacToeWin("O")) {
                        renderTicTacToeBoard();
                        document.getElementById('ticTacToe-status').textContent = "AI Wins! ü§ñ";
                        ticTacToeGameOver = true;
                        return;
                    }
                    ticTacToeBoard[i] = null;
                }
            }
            
            // Block player's win
            for (let i = 0; i < 9; i++) {
                if (ticTacToeBoard[i] === null) {
                    ticTacToeBoard[i] = "X";
                    if (checkTicTacToeWin("X")) {
                        ticTacToeBoard[i] = "O";
                        renderTicTacToeBoard();
                        document.getElementById('ticTacToe-status').textContent = "X's turn";
                        ticTacToeCurrentPlayer = "X";
                        return;
                    }
                    ticTacToeBoard[i] = null;
                }
            }
            
            // Take center if available
            if (ticTacToeBoard[4] === null) {
                ticTacToeBoard[4] = "O";
                renderTicTacToeBoard();
                document.getElementById('ticTacToe-status').textContent = "X's turn";
                ticTacToeCurrentPlayer = "X";
                return;
            }
            
            // Take corner if available
            const corners = [0, 2, 6, 8];
            const emptyCorners = corners.filter(i => ticTacToeBoard[i] === null);
            if (emptyCorners.length > 0) {
                const randomCorner = emptyCorners[Math.floor(Math.random() * emptyCorners.length)];
                ticTacToeBoard[randomCorner] = "O";
                renderTicTacToeBoard();
                document.getElementById('ticTacToe-status').textContent = "X's turn";
                ticTacToeCurrentPlayer = "X";
                return;
            }
            
            // Take edge
            const edges = [1, 3, 5, 7];
            const emptyEdges = edges.filter(i => ticTacToeBoard[i] === null);
            if (emptyEdges.length > 0) {
                const randomEdge = emptyEdges[Math.floor(Math.random() * emptyEdges.length)];
                ticTacToeBoard[randomEdge] = "O";
                renderTicTacToeBoard();
                document.getElementById('ticTacToe-status').textContent = "X's turn";
                ticTacToeCurrentPlayer = "X";
                return;
            }
        }

        function checkTicTacToeWin(player) {
            const winCombos = [
                [0, 1, 2], [3, 4, 5], [6, 7, 8], // Rows
                [0, 3, 6], [1, 4, 7], [2, 5, 8], // Columns
                [0, 4, 8], [2, 4, 6]             // Diagonals
            ];
            return winCombos.some(combo => 
                combo.every(index => ticTacToeBoard[index] === player)
            );
        }

        function checkTicTacToeDraw() {
            return ticTacToeBoard.every(cell => cell !== null);
        }

        // Initialize on load
        window.onload = initTicTacToe;
    </script>
</body>
</html>