<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gomoku (5 in a Row)</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Arial', sans-serif; }
        body { background: #1a1a1a; color: #fff; min-height: 100vh; padding: 20px; }
        .header { text-align: center; margin-bottom: 30px; }
        .header h1 { font-size: 2.5rem; margin-bottom: 10px; color: #ffd700; }
        .header p { color: #ccc; font-size: 1.1rem; }
        .game-container { max-width: 500px; margin: 0 auto; background: #222; border-radius: 12px; padding: 20px; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
        .control-buttons { text-align: center; margin: 10px 0; }
        .control-btn { padding: 8px 16px; margin: 0 5px; background: #2196F3; color: white; border-radius: 4px; border: none; cursor: pointer; }
        .control-btn:hover { opacity: 0.9; transform: translateY(-2px); }
        .status { margin: 15px 0; font-size: 1.2rem; text-align: center; color: #ffd700; }
    </style>
</head>
<body>
    <div class="header">
        <h1>Gomoku (5 in a Row)</h1>
        <p>Play against AI - First to 5 in a row wins</p>
    </div>

    <div class="game-container">
        <div class="control-buttons">
            <button class="control-btn" onclick="resetGomoku()">Start / Reset</button>
        </div>
        <div class="difficulty" style="text-align: center; margin-bottom: 10px;">
            <button class="active" data-level="easy" style="padding: 8px 16px; margin: 0 5px; background: #8b4513; color: white; border: none; border-radius: 4px; cursor: pointer;">Easy</button>
            <button data-level="medium" style="padding: 8px 16px; margin: 0 5px; background: #8b4513; color: white; border: none; border-radius: 4px; cursor: pointer;">Medium</button>
            <button data-level="hard" style="padding: 8px 16px; margin: 0 5px; background: #8b4513; color: white; border: none; border-radius: 4px; cursor: pointer;">Hard</button>
        </div>
        <div id="gomoku-board" style="display: grid; grid-template-columns: repeat(15, 30px); gap: 1px; background: #8b4513; padding: 5px; border-radius: 4px; margin: 0 auto;"></div>
        <div class="status" id="gomoku-status">Your turn (Black) - Click to place stone</div>
    </div>

    <script>
        const GOMOKU_SIZE = 15;
        let gomokuBoard = Array(GOMOKU_SIZE).fill().map(() => Array(GOMOKU_SIZE).fill(0)); // 0:empty, 1:player(black), 2:AI(blue)
        let gomokuCurrentPlayer = 1;
        let gomokuDifficulty = "easy";
        let gomokuGameOver = false;

        // Create Gomoku Board
        const gomokuBoardEl = document.getElementById('gomoku-board');
        for (let i = 0; i < GOMOKU_SIZE; i++) {
            for (let j = 0; j < GOMOKU_SIZE; j++) {
                const cell = document.createElement("div");
                cell.style.width = "30px";
                cell.style.height = "30px";
                cell.style.background = "#f0e6d6";
                cell.style.cursor = "pointer";
                cell.style.display = "flex";
                cell.style.alignItems = "center";
                cell.style.justifyContent = "center";
                cell.dataset.row = i;
                cell.dataset.col = j;
                cell.addEventListener("click", () => handleGomokuCellClick(i, j));
                gomokuBoardEl.appendChild(cell);
            }
        }

        // Difficulty Selection
        document.querySelectorAll('.difficulty button').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.difficulty button').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                gomokuDifficulty = btn.dataset.level;
                resetGomoku();
            });
        });

        function handleGomokuCellClick(row, col) {
            if (gomokuGameOver || gomokuBoard[row][col] !== 0) return;
            gomokuBoard[row][col] = gomokuCurrentPlayer;
            updateGomokuBoard();
            
            if (checkGomokuWin(row, col, gomokuCurrentPlayer)) {
                document.getElementById('gomoku-status').textContent = gomokuCurrentPlayer === 1 ? "üéâ You Win!" : "AI Wins!";
                gomokuGameOver = true;
                return;
            }
            
            if (checkGomokuDraw()) {
                document.getElementById('gomoku-status').textContent = "ü§ù It's a Draw!";
                gomokuGameOver = true;
                return;
            }
            
            gomokuCurrentPlayer = gomokuCurrentPlayer === 1 ? 2 : 1;
            document.getElementById('gomoku-status').textContent = gomokuCurrentPlayer === 1 ? "Your turn (Black)" : "AI is thinking...";
            
            if (gomokuCurrentPlayer === 2 && !gomokuGameOver) {
                setTimeout(gomokuAIMove, 500);
            }
        }

        function gomokuAIMove() {
            let row, col;
            switch (gomokuDifficulty) {
                case "easy": [row, col] = getGomokuRandomEmptyCell(); break;
                case "medium": [row, col] = getGomokuDefendCell() || getGomokuRandomEmptyCell(); break;
                case "hard": [row, col] = getGomokuAttackCell() || getGomokuDefendCell() || getGomokuRandomEmptyCell(); break;
            }
            gomokuBoard[row][col] = 2;
            updateGomokuBoard();
            
            if (checkGomokuWin(row, col, 2)) {
                document.getElementById('gomoku-status').textContent = "AI Wins!";
                gomokuGameOver = true;
                return;
            }
            
            if (checkGomokuDraw()) {
                document.getElementById('gomoku-status').textContent = "ü§ù It's a Draw!";
                gomokuGameOver = true;
                return;
            }
            
            gomokuCurrentPlayer = 1;
            document.getElementById('gomoku-status').textContent = "Your turn (Black)";
        }

        function getGomokuRandomEmptyCell() {
            const emptyCells = [];
            for (let i = 0; i < GOMOKU_SIZE; i++) {
                for (let j = 0; j < GOMOKU_SIZE; j++) {
                    if (gomokuBoard[i][j] === 0) emptyCells.push([i, j]);
                }
            }
            return emptyCells[Math.floor(Math.random() * emptyCells.length)];
        }

        function getGomokuDefendCell() { return getGomokuThreatCell(1); }
        function getGomokuAttackCell() { return getGomokuThreatCell(2); }

        function getGomokuThreatCell(player) {
            const directions = [[0,1],[1,0],[1,1],[1,-1]];
            for (let i = 0; i < GOMOKU_SIZE; i++) {
                for (let j = 0; j < GOMOKU_SIZE; j++) {
                    if (gomokuBoard[i][j] !== 0) continue;
                    gomokuBoard[i][j] = player;
                    let isThreat = false;
                    for (const [dx, dy] of directions) {
                        let count = 1;
                        for (let k = 1; k < 5; k++) {
                            const x = i + dx * k;
                            const y = j + dy * k;
                            if (x < 0 || x >= GOMOKU_SIZE || y < 0 || y >= GOMOKU_SIZE || gomokuBoard[x][y] !== player) break;
                            count++;
                        }
                        for (let k = 1; k < 5; k++) {
                            const x = i - dx * k;
                            const y = j - dy * k;
                            if (x < 0 || x >= GOMOKU_SIZE || y < 0 || y >= GOMOKU_SIZE || gomokuBoard[x][y] !== player) break;
                            count++;
                        }
                        if (count >= 4) { isThreat = true; break; }
                    }
                    gomokuBoard[i][j] = 0;
                    if (isThreat) return [i, j];
                }
            }
            return null;
        }

        function checkGomokuWin(row, col, player) {
            const directions = [[0,1],[1,0],[1,1],[1,-1]];
            for (const [dx, dy] of directions) {
                let count = 1;
                for (let k = 1; k < 5; k++) {
                    const x = row + dx * k;
                    const y = col + dy * k;
                    if (x < 0 || x >= GOMOKU_SIZE || y < 0 || y >= GOMOKU_SIZE || gomokuBoard[x][y] !== player) break;
                    count++;
                }
                for (let k = 1; k < 5; k++) {
                    const x = row - dx * k;
                    const y = col - dy * k;
                    if (x < 0 || x >= GOMOKU_SIZE || y < 0 || y >= GOMOKU_SIZE || gomokuBoard[x][y] !== player) break;
                    count++;
                }
                if (count >= 5) return true;
            }
            return false;
        }

        function checkGomokuDraw() {
            for (let i = 0; i < GOMOKU_SIZE; i++) {
                for (let j = 0; j < GOMOKU_SIZE; j++) {
                    if (gomokuBoard[i][j] === 0) return false;
                }
            }
            return true;
        }

        function updateGomokuBoard() {
            document.querySelectorAll('#gomoku-board div').forEach(cell => {
                const row = parseInt(cell.dataset.row);
                const col = parseInt(cell.dataset.col);
                cell.style.background = "#f0e6d6";
                cell.style.border = "none";
                if (gomokuBoard[row][col] === 1) {
                    cell.style.background = "#000";
                    cell.style.borderRadius = "50%";
                }
                if (gomokuBoard[row][col] === 2) {
                    cell.style.background = "#42a5f5"; // Blue stone
                    cell.style.border = "2px solid #000";
                    cell.style.borderRadius = "50%";
                }
            });
        }

        function resetGomoku() {
            gomokuBoard = Array(GOMOKU_SIZE).fill().map(() => Array(GOMOKU_SIZE).fill(0));
            gomokuCurrentPlayer = 1;
            gomokuGameOver = false;
            updateGomokuBoard();
            document.getElementById('gomoku-status').textContent = "Your turn (Black) - Click to place stone";
        }

        // Initialize on load
        window.onload = resetGomoku;
    </script>
</body>
</html>